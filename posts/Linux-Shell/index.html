<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="天前"><meta name="hour-prompt" content="小时前"><meta name="minute-prompt" content="分钟前"><meta name="justnow-prompt" content="刚刚"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Linux-Shell" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="1.shell简介" /><meta property="og:description" content="1.shell简介" /><link rel="canonical" href="https://carmanzheng.github.io//posts/Linux-Shell/" /><meta property="og:url" content="https://carmanzheng.github.io//posts/Linux-Shell/" /><meta property="og:site_name" content="Technical Blogs" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-08-11T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Linux-Shell" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"description":"1.shell简介","headline":"Linux-Shell","dateModified":"2021-08-11T00:00:00+08:00","datePublished":"2021-08-11T00:00:00+08:00","url":"https://carmanzheng.github.io//posts/Linux-Shell/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://carmanzheng.github.io//posts/Linux-Shell/"},"@context":"https://schema.org"}</script><title>Linux-Shell | Technical Blogs</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Technical Blogs"><meta name="application-name" content="Technical Blogs"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="zh-CN"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/favicons/android-chrome-192x192.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Technical Blogs</a></div><div class="site-subtitle font-italic">Learning by Doing, Sharing for more!</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>归档</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/Carmanzheng" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['zhengkan1993','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> 首页 </a> </span> <span>Linux-Shell</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> 文章</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >取消</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Linux-Shell</h1><div class="post-meta text-muted"><div> 作者 <em> <a href="https://github.com/carmanzheng">carmanzheng</a> </em></div><div class="d-flex"><div> <span> 发表于 <em class="timeago" date="2021-08-11 00:00:00 +0800" data-toggle="tooltip" data-placement="bottom" title="2021-08-11, 00:00 +0800" >2021-08-11</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4989 字"> <em>27 分钟</em>阅读</span></div></div></div><div class="post-content"><h3 id="1shell简介">1.shell简介<a href="#1shell简介" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="1简介">1.简介<a href="#1简介" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>Linux系统可以划分为四个部分：</p><ol><li>应用软件<li>窗口管理软件<li>GNU系统工具链<li>Linux内核</ol><p><img data-src="../../assets/images/20210811Linux-shell/image-20210822152235927.png" alt="image-20210822152235927" style="zoom:50%;" data-proofer-ignore></p><p>Linux shell 是一种特殊的交互式工具，它提供了文件管理、运行进程的的途径。</p><p>Shell的核心是命令提示符，允许用户输入命令，然后解释命令，并在内核中执行。</p><p>用户可以编写脚本文件，将多个shell命令以某种形式组织起来，作为程序一起执行</p><h4 id="2常见的shell">2.常见的shell<a href="#2常见的shell" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>shell有很多种，不同的shell有不同的特性</p><div class="table-wrapper"><table><thead><tr><th>shell<th>描述<tbody><tr><td>bsh<td>一种最早出现在Unix系统上的标准shell，全程叫Bourne shell<tr><td>bash<td>一种对bsh在功能上进行扩展的shell，几乎可以涵盖shell所需要的所有功能<tr><td>ksh<td>一种与bsh兼容的编程shell，增加了很多特性，常见于Unix操作系统<tr><td>tcsh<td>一种具有C语言风格语法结构的shell，常见于嵌入式开发<tr><td>zsh<td>一种结合了bash、ksh和tsh的特点，同时提供了高级编程特性的高级shell<tr><td>sh<td>绝大部分Linux发行版中，作为软链接指向其他shell（默认是bash）</table></div><li><p>几乎所有的Linux发行版默认shell是bash shell</p><li><p>有些发行版默认系统shell和默认交互shell并不相同</p><li><p>查看系统支持的shell类型</p></ol><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre>root@luckydog:~# <span class="nb">cat</span> /etc/shells
<span class="c"># /etc/shells: valid login shells</span>
/bin/sh
/bin/bash
/usr/bin/bash
/bin/rbash
/usr/bin/rbash
/bin/dash
/usr/bin/dash

root@luckydog:~# <span class="nb">cat</span> /etc/shells |xargs <span class="nb">ls</span> <span class="nt">-al</span>
<span class="nb">ls</span>: cannot access <span class="s1">'#'</span>: No such file or directory
<span class="nb">ls</span>: cannot access <span class="s1">'/etc/shells:'</span>: No such file or directory
<span class="nb">ls</span>: cannot access <span class="s1">'valid'</span>: No such file or directory
<span class="nb">ls</span>: cannot access <span class="s1">'login'</span>: No such file or directory
<span class="nb">ls</span>: cannot access <span class="s1">'shells'</span>: No such file or directory
<span class="nt">-rwxr-xr-x</span> 1 root root 1183448 Jun 18  2020  /bin/bash
<span class="nt">-rwxr-xr-x</span> 1 root root  129816 Jul 19  2019  /bin/dash
lrwxrwxrwx 1 root root       4 Jun 18  2020  /bin/rbash -&gt; bash
lrwxrwxrwx 1 root root       4 Jun 23 11:28  /bin/sh -&gt; dash
<span class="nt">-rwxr-xr-x</span> 1 root root 1183448 Jun 18  2020  /usr/bin/bash
<span class="nt">-rwxr-xr-x</span> 1 root root  129816 Jul 19  2019  /usr/bin/dash
lrwxrwxrwx 1 root root       4 Jun 18  2020  /usr/bin/rbash -&gt; bash

<span class="c"># 查看当前交互shell类型是 bash</span>
root@luckydog:~# <span class="nb">echo</span> <span class="nv">$SHELL</span>
/bin/bash
</pre></table></code></div></div><h3 id="2shell常用命令">2.shell常用命令<a href="#2shell常用命令" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="1常见命令">1.常见命令<a href="#1常见命令" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>管理文件和目录：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre> <span class="nb">cd 		pwd		ls		touch	cp		 mv	rm	mkdir	rmdir	</span>file	<span class="nb">cat   </span>more      less      <span class="nb">tail      head</span>
</pre></table></code></div></div><li><p>管理系统进程</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ps      top       <span class="nb">kill      </span>killall
</pre></table></code></div></div><li><p>管理磁盘空间</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>mount    umount   <span class="nb">df   du</span> 
</pre></table></code></div></div><li><p>处理数据文件</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sort    grep     gzip     tar</span> 
</pre></table></code></div></div></ol><p>shell命令帮助手册： <strong>man</strong> [command]</p><h4 id="2外部命令">2.外部命令<a href="#2外部命令" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>外部命令也成为文件系统命令，通常位于/bin、/sbin、/usr/bin、/usr/sbin等目录中</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c"># 查看命令位置</span>
root@luckydog:~# which <span class="nb">ls</span>
/usr/bin/ls
</pre></table></code></div></div><li><p>fork：外部命令执行时，会创建一个子进程。</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>root@luckydog:~# ps <span class="nt">-f</span>
UID          PID    PPID  C STIME TTY          TIME CMD
root       74229   74187  0 15:32 pts/0    00:00:00 <span class="nt">-bash</span>
root       74259   74229  0 15:33 pts/0    00:00:00 /bin/sh
root       74260   74259  0 15:33 pts/0    00:00:00 /bin/bash
root       74269   74260  0 15:34 pts/0    00:00:00 /bin/bash
root       74306   74269  0 15:53 pts/0    00:00:00 ps <span class="nt">-f</span>
</pre></table></code></div></div><p>可以看到，执行<code class="language-plaintext highlighter-rouge">ps -f</code>命令时，会在父进程（74269）下创建一个子进程（74306）</p></ol><h4 id="3内建命令">3.内建命令<a href="#3内建命令" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>作为shell工具的组成部分，内建命令不需要使用子进程来执行</p><li><p>对于有些命令，有多种实现，既有外部命令，也有内建命令。</p><li><p>了解某个命令的类型</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nb">type</span> <span class="nt">-a</span> <span class="nb">pwd</span>
   
<span class="c"># pwd既是外部命令，也是内建命令</span>
root@luckydog:~# <span class="nb">type</span> <span class="nt">-a</span> <span class="nb">pwd
pwd </span>is a shell <span class="nb">builtin
pwd </span>is /usr/bin/pwd
<span class="nb">pwd </span>is /bin/pwd
   
</pre></table></code></div></div><li><p>了解所有内建命令</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>man <span class="nb">builtin</span>
</pre></table></code></div></div></ol><h3 id="3shell脚本基础">3.shell脚本基础<a href="#3shell脚本基础" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="1编写">1.编写<a href="#1编写" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>脚本创建、执行与退出状态码</p><p>第一行需要指定shell类型shebang</p><p>script.sh:</p><div class="language-shell highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nb">date
who</span>
</pre></table></code></div></div><li><p>执行脚本</p><ul><li>增加脚本可执行权限 （chmod）<li>使用绝对/相对路径执行shell脚本</ul><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">chmod</span> +x script.sh
./script.sh
</pre></table></code></div></div><li><p>脚本的退出状态码</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="c"># 通过 $?查看脚本执行状态</span>
<span class="c"># 查看状态： 0 - 执行成功；其他数字 - 执行失败</span>
<span class="nv">$?</span>
</pre></table></code></div></div></ol><h4 id="2变量定义与使用">2.变量定义与使用<a href="#2变量定义与使用" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>Linux系统的环境变量</p><p>通过<code class="language-plaintext highlighter-rouge">set</code>查看：</p><ul><li><p>局部环境变量</p><p>通常是小写字母，只在其定义的进程中可见</p><li><p>全局环境变量</p><p>通常为大写字母，全局可见</p></ul><li><p>用户自定义变量</p><p>用户可以自定义由字母、数字和下划线组成，长度不超过20个字符，区分大小写</p><li><p>变量的定义和赋值</p><p><strong>等号两边不能有空格</strong></p><li><p>使用美元符$对变量进行引用</p><p>建议使用<strong><code class="language-plaintext highlighter-rouge">${variable_name}</code></strong></p><li><p>命令替换：将命令的输出赋值给变量</p><ul><li>反引号<code class="language-plaintext highlighter-rouge">command</code><li>推荐使用 <strong>$(command)</strong></ul></ol><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nb">date
echo</span> <span class="s2">"current user is </span><span class="k">${</span><span class="nv">USER</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"current user UID is </span><span class="k">${</span><span class="nv">UID</span><span class="k">}</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"current user HOME path is </span><span class="k">${</span><span class="nv">HOME</span><span class="k">}</span><span class="s2">"</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>root@luckydog:~# <span class="nb">chmod</span> +x script
root@luckydog:~# ./script
Sun 22 Aug 2021 04:19:48 PM CST
current user is root
current user UID is 0
current user HOME path is /root
</pre></table></code></div></div><p>TIP: echo语句或解释语句内容（不包括通配符），所以 如果语句不包含对通配符的解释，一律用双引号括起来。</p><h4 id="3数学运算">3.数学运算<a href="#3数学运算" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>略</p><h3 id="4shell脚本条件控制">4.shell脚本条件控制<a href="#4shell脚本条件控制" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="1-if-then语句">1. if-then语句<a href="#1-if-then语句" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">if </span><span class="nb">command
</span><span class="k">then 
	</span>commands
<span class="k">fi</span>

<span class="nt">--------------------------</span>

<span class="k">if </span><span class="nb">command</span><span class="p">;</span> <span class="k">then
	</span>commands
<span class="k">fi</span>
</pre></table></code></div></div><h4 id="2if-elif-then">2.if-elif-then<a href="#2if-elif-then" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">if </span><span class="nb">command
</span><span class="k">then
	</span>commands
<span class="k">elif </span><span class="nb">command
</span><span class="k">then
	</span>commands
<span class="k">else 
	</span>commands
<span class="k">fi</span>
</pre></table></code></div></div><h4 id="3条件测试test命令">3.条件测试test命令<a href="#3条件测试test命令" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="k">if </span><span class="nb">test </span>condition
<span class="k">then 
	</span>commands
<span class="k">fi</span>

<span class="nt">---------------------</span>
<span class="c"># 方括号两边必须加上空格</span>
<span class="k">if</span> <span class="o">[</span> condition <span class="o">]</span>
<span class="k">then
	</span>commands
<span class="k">fi</span>
</pre></table></code></div></div><h5 id="1数值比较">1.数值比较<a href="#1数值比较" class="anchor"><i class="fas fa-hashtag"></i></a></h5></h5><div class="table-wrapper"><table><thead><tr><th style="text-align: center">-eq<th style="text-align: center">-ne<th style="text-align: center">-gt<th style="text-align: center">-ge<th style="text-align: center">-lt<th style="text-align: center">-le<tbody><tr><td style="text-align: center">等于（equal）<td style="text-align: center">不等于（not equal）<td style="text-align: center">大于（great than）<td style="text-align: center">大于等于（great equal）<td style="text-align: center">小于（less than)<td style="text-align: center">小于等于(less equal)</table></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">num1</span><span class="o">=</span>100
<span class="nv">num2</span><span class="o">=</span>100
<span class="k">if </span><span class="nb">test</span> <span class="nv">$[</span>num1] <span class="nt">-eq</span> <span class="nv">$[</span>num2]
<span class="k">then
    </span><span class="nb">echo</span> <span class="s1">'两个数相等！'</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s1">'两个数不相等！'</span>
<span class="k">fi</span>
</pre></table></code></div></div><h5 id="2字符串比较">2.字符串比较<a href="#2字符串比较" class="anchor"><i class="fas fa-hashtag"></i></a></h5></h5><div class="table-wrapper"><table><thead><tr><th>=<th>！=<th>-z 字符串<th>-n 字符串<tbody><tr><td>等于<td>不等于<td>字符串长度为0<td>字符串长度不为0</table></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nv">num1</span><span class="o">=</span><span class="s2">"ru1noob"</span>
<span class="nv">num2</span><span class="o">=</span><span class="s2">"runoob"</span>
<span class="k">if </span><span class="nb">test</span> <span class="nv">$num1</span> <span class="o">=</span> <span class="nv">$num2</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s1">'两个字符串相等!'</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s1">'两个字符串不相等!'</span>
<span class="k">fi</span>
</pre></table></code></div></div><h5 id="3文件比较">3.文件比较<a href="#3文件比较" class="anchor"><i class="fas fa-hashtag"></i></a></h5></h5><div class="table-wrapper"><table><thead><tr><th style="text-align: left">参数<th style="text-align: left">说明<tbody><tr><td style="text-align: left">-e 文件名<td style="text-align: left">如果文件存在则为真<tr><td style="text-align: left">-r 文件名<td style="text-align: left">如果文件存在且可读则为真<tr><td style="text-align: left">-w 文件名<td style="text-align: left">如果文件存在且可写则为真<tr><td style="text-align: left">-x 文件名<td style="text-align: left">如果文件存在且可执行则为真<tr><td style="text-align: left">-s 文件名<td style="text-align: left">如果文件存在且至少有一个字符则为真<tr><td style="text-align: left">-d 文件名<td style="text-align: left">如果文件存在且为目录则为真<tr><td style="text-align: left">-f 文件名<td style="text-align: left">如果文件存在且为普通文件则为真<tr><td style="text-align: left">-c 文件名<td style="text-align: left">如果文件存在且为字符型特殊文件则为真<tr><td style="text-align: left">-b 文件名<td style="text-align: left">如果文件存在且为块特殊文件则为真<tr><td style="text-align: left">-a<td style="text-align: left">与运算<tr><td style="text-align: left">-o<td style="text-align: left">或运算<tr><td style="text-align: left">！<td style="text-align: left">非运算</table></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nb">cd</span> /bin
<span class="k">if </span><span class="nb">test</span> <span class="nt">-e</span> ./bash
<span class="k">then
    </span><span class="nb">echo</span> <span class="s1">'文件已存在!'</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s1">'文件不存在!'</span>
<span class="k">fi</span>
</pre></table></code></div></div><p>另外，Shell 还提供了与( -a )、或( -o )、非( ! )三个逻辑操作符用于将测试条件连接起来，其优先级为： <strong>!</strong> 最高， <strong>-a</strong> 次之， <strong>-o</strong> 最低。例如：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nb">cd</span> /bin
<span class="k">if </span><span class="nb">test</span> <span class="nt">-e</span> ./notFile <span class="nt">-o</span> <span class="nt">-e</span> ./bash
<span class="k">then
    </span><span class="nb">echo</span> <span class="s1">'至少有一个文件存在!'</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s1">'两个文件都不存在'</span>
<span class="k">fi</span>
</pre></table></code></div></div><h4 id="4if-then高级特性-双括号">4.if-then高级特性-双括号<a href="#4if-then高级特性-双括号" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ul><li>支持高级<strong>数据表达式</strong>计算<li>命令格式：((expression))<li>expression可以是数据赋值或者比较表达式</ul><p>script01.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c"># 赋值等号没有空格，必须连着写</span>
<span class="c">#!/bin/bash</span>
<span class="nv">value</span><span class="o">=</span>10
<span class="k">if</span> <span class="o">((</span> <span class="k">${</span><span class="nv">value</span><span class="k">}</span> <span class="k">**</span> 2 <span class="o">&gt;</span>90<span class="o">))</span>
<span class="k">then</span>
	<span class="o">((</span>answer <span class="o">=</span> <span class="k">${</span><span class="nv">value</span><span class="k">}</span> <span class="k">**</span> 2<span class="o">))</span>
	<span class="nb">echo</span> <span class="s2">"the answer of </span><span class="k">${</span><span class="nv">value</span><span class="k">}</span><span class="s2"> ** 2 is </span><span class="k">${</span><span class="nv">answer</span><span class="k">}</span><span class="s2">."</span>
<span class="k">fi</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script01.sh
the answer of 10 <span class="k">**</span> 2 is 100.
</pre></table></code></div></div><h4 id="5if-then高级特性-双方括号">5.if-then高级特性-双方括号<a href="#5if-then高级特性-双方括号" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ul><li>支持针对<strong>字符串</strong>比较的高级特性<li>命令格式 [[ expression ]]<li>除了标准的字符串比较，还支持模式匹配</ul><p>script02.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">value</span><span class="o">=</span>10
<span class="k">if</span> <span class="o">[[</span> <span class="k">${</span><span class="nv">USER</span><span class="k">}</span> <span class="o">==</span> r<span class="k">*</span> <span class="o">]]</span>
<span class="k">then
	</span><span class="nb">echo</span> <span class="s2">"the USER name is </span><span class="k">${</span><span class="nv">USER</span><span class="k">}</span><span class="s2">."</span>
<span class="k">fi</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script02.sh
the USER name is root.
</pre></table></code></div></div><h4 id="6case语句">6.case语句<a href="#6case语句" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-shell highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="k">case</span> expression <span class="k">in 
	</span>pattern1<span class="p">)</span>
		commands<span class="p">;;</span>
    pattern2<span class="p">)</span>
    	commands<span class="p">;;</span>
   	pattern3<span class="p">)</span>
   		commands<span class="p">;;</span>
   	<span class="k">*</span><span class="p">)</span>
   		default commands<span class="p">;;</span>
 <span class="k">esac</span>
</pre></table></code></div></div><p>script03.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">case</span> <span class="k">${</span><span class="nv">USER</span><span class="k">}</span> <span class="k">in 
	</span>mysql<span class="p">)</span>
		<span class="nb">echo</span> <span class="s2">"current user is mysql"</span><span class="p">;;</span>
	root<span class="p">)</span>
		<span class="nb">echo</span> <span class="s2">"current user is root"</span><span class="p">;;</span>
	<span class="k">*</span><span class="p">)</span>
		<span class="nb">echo</span> <span class="s2">"unknown user."</span><span class="p">;;</span>
<span class="k">esac</span>
		
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script03.sh
current user is root
</pre></table></code></div></div><h3 id="5shell脚本循环控制">5.shell脚本循环控制<a href="#5shell脚本循环控制" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="1for语句">1.for语句<a href="#1for语句" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li>用于遍历一个制定的列表，每次迭代使用列表中的一个元素，执行好定义好的一组命令。<li>for语句格式</ol><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">for </span>var <span class="k">in </span>list
<span class="k">do 
	</span>commands
<span class="k">done</span>

<span class="nt">--------------------</span>
<span class="k">for </span>var <span class="k">in </span>list<span class="p">;</span> <span class="k">do 
	</span>commands
<span class="k">done</span>
</pre></table></code></div></div><ol><li>for 命令的使用</ol><p>script04.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="k">for </span>fruit <span class="k">in </span>apple lemon orange
<span class="k">do
	</span><span class="nb">echo</span> <span class="k">${</span><span class="nv">fruit</span><span class="k">}</span>
<span class="k">done</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script04.sh
apple
lemon
orange
</pre></table></code></div></div><ol><li><p>从命令中读取数据列表</p><p>将变量写入文本文件<code class="language-plaintext highlighter-rouge">fruitlist.txt</code>中</p></ol><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"apple</span><span class="se">\n</span><span class="s2">lemon</span><span class="se">\n</span><span class="s2">orange</span><span class="se">\n</span><span class="s2">"</span> <span class="o">&gt;</span> fruitlist.txt
</pre></table></code></div></div><p>script05.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">file</span><span class="o">=</span><span class="s1">'fruitlist.txt'</span>
<span class="k">for </span>fruit <span class="k">in</span> <span class="si">$(</span><span class="nb">cat</span> <span class="k">${</span><span class="nv">file</span><span class="k">}</span><span class="si">)</span>
<span class="k">do 
	</span><span class="nb">echo</span> <span class="s2">"this is </span><span class="nv">$fruit</span><span class="s2">"</span>
<span class="k">done</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script05.sh
this is apple
this is lemon
this is orange
</pre></table></code></div></div><ol><li>更改字段分隔符 $IFS</ol><p>script06.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">fruitlist</span><span class="o">=</span><span class="s1">'apple:lemon:orange'</span>
<span class="nv">IFS</span><span class="o">=</span>:
<span class="k">for </span>fruit <span class="k">in</span> <span class="nv">$fruitlist</span>
<span class="k">do 
	</span><span class="nb">echo</span> <span class="s2">"this is </span><span class="nv">$fruit</span><span class="s2">"</span>
<span class="k">done</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script06.sh
this is apple
this is lemon
this is orange
</pre></table></code></div></div><ol><li>通配符遍历</ol><p>script07.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="k">for </span>file <span class="k">in</span> ./<span class="k">*</span>
<span class="k">do 
	if</span> <span class="o">[[</span> <span class="k">${</span><span class="nv">file</span><span class="p">##*.</span><span class="k">}</span> <span class="o">=</span> sh <span class="o">]]</span>
	<span class="k">then
		</span><span class="nb">echo</span> <span class="s2">"sh文件:</span><span class="nv">$file</span><span class="s2">"</span>
	<span class="k">elif</span> <span class="o">[[</span> <span class="k">${</span><span class="nv">file</span><span class="p">##*.</span><span class="k">}</span> <span class="o">=</span> txt <span class="o">]]</span>
	<span class="k">then
		</span><span class="nb">echo</span> <span class="s2">"txt文件:</span><span class="nv">$file</span><span class="s2">"</span>
	<span class="k">fi
done</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script07.sh
txt文件:./fruitlist.txt
sh文件:./get-docker.sh
sh文件:./script01.sh
sh文件:./script02.sh
sh文件:./script03.sh
sh文件:./script04.sh
sh文件:./script05.sh
sh文件:./script06.sh
sh文件:./script07.sh
</pre></table></code></div></div><h4 id="2while语句">2.while语句<a href="#2while语句" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">while</span> <span class="o">[</span> <span class="nb">command</span> <span class="o">]</span>
<span class="k">do 
	</span>commands
<span class="k">done</span>
</pre></table></code></div></div><p>script08.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="nv">i</span><span class="o">=</span>1
<span class="k">while</span> <span class="o">[</span> <span class="nv">$i</span> <span class="nt">-le</span> 10 <span class="o">]</span>
<span class="k">do
	</span><span class="nb">echo</span> <span class="s2">"the number is </span><span class="nv">$i</span><span class="s2">"</span>
	<span class="o">((</span>i <span class="o">=</span> i + 1<span class="o">))</span>
<span class="k">done</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script08.sh
the number is 1
the number is 2
the number is 3
the number is 4
the number is 5
the number is 6
the number is 7
the number is 8
the number is 9
the number is 10
</pre></table></code></div></div><h4 id="3循环控制break">3.循环控制break<a href="#3循环控制break" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>break可以跳出任意类型的循环</p><ol><li>跳出内部循环, 使用<code class="language-plaintext highlighter-rouge">break</code><li>跳出外层循环，使用<code class="language-plaintext highlighter-rouge">break n</code>，其中n为整数</ol><p>script09.sh [九九乘法表]</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="k">for </span>i <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>1 9<span class="si">)</span>
<span class="k">do 
	for </span>j <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>1 9<span class="si">)</span>
	<span class="k">do
		</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$i</span><span class="s2"> * </span><span class="nv">$j</span><span class="s2"> = </span><span class="k">$((</span><span class="nv">$i</span><span class="o">*</span><span class="nv">$j</span><span class="k">))</span><span class="s2">"</span>
	<span class="k">done
done</span>

</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script09.sh
1 <span class="k">*</span> 1 <span class="o">=</span> 1
1 <span class="k">*</span> 2 <span class="o">=</span> 2
1 <span class="k">*</span> 3 <span class="o">=</span> 3
1 <span class="k">*</span> 4 <span class="o">=</span> 4
1 <span class="k">*</span> 5 <span class="o">=</span> 5
1 <span class="k">*</span> 6 <span class="o">=</span> 6
1 <span class="k">*</span> 7 <span class="o">=</span> 7
1 <span class="k">*</span> 8 <span class="o">=</span> 8
1 <span class="k">*</span> 9 <span class="o">=</span> 9
2 <span class="k">*</span> 1 <span class="o">=</span> 2
2 <span class="k">*</span> 2 <span class="o">=</span> 4
2 <span class="k">*</span> 3 <span class="o">=</span> 6
2 <span class="k">*</span> 4 <span class="o">=</span> 8
2 <span class="k">*</span> 5 <span class="o">=</span> 10
2 <span class="k">*</span> 6 <span class="o">=</span> 12
2 <span class="k">*</span> 7 <span class="o">=</span> 14
2 <span class="k">*</span> 8 <span class="o">=</span> 16
2 <span class="k">*</span> 9 <span class="o">=</span> 18
3 <span class="k">*</span> 1 <span class="o">=</span> 3
3 <span class="k">*</span> 2 <span class="o">=</span> 6
3 <span class="k">*</span> 3 <span class="o">=</span> 9
3 <span class="k">*</span> 4 <span class="o">=</span> 12
3 <span class="k">*</span> 5 <span class="o">=</span> 15
3 <span class="k">*</span> 6 <span class="o">=</span> 18
3 <span class="k">*</span> 7 <span class="o">=</span> 21
3 <span class="k">*</span> 8 <span class="o">=</span> 24
3 <span class="k">*</span> 9 <span class="o">=</span> 27
4 <span class="k">*</span> 1 <span class="o">=</span> 4
4 <span class="k">*</span> 2 <span class="o">=</span> 8
4 <span class="k">*</span> 3 <span class="o">=</span> 12
4 <span class="k">*</span> 4 <span class="o">=</span> 16
4 <span class="k">*</span> 5 <span class="o">=</span> 20
4 <span class="k">*</span> 6 <span class="o">=</span> 24
4 <span class="k">*</span> 7 <span class="o">=</span> 28
4 <span class="k">*</span> 8 <span class="o">=</span> 32
4 <span class="k">*</span> 9 <span class="o">=</span> 36
5 <span class="k">*</span> 1 <span class="o">=</span> 5
5 <span class="k">*</span> 2 <span class="o">=</span> 10
5 <span class="k">*</span> 3 <span class="o">=</span> 15
5 <span class="k">*</span> 4 <span class="o">=</span> 20
5 <span class="k">*</span> 5 <span class="o">=</span> 25
5 <span class="k">*</span> 6 <span class="o">=</span> 30
5 <span class="k">*</span> 7 <span class="o">=</span> 35
5 <span class="k">*</span> 8 <span class="o">=</span> 40
5 <span class="k">*</span> 9 <span class="o">=</span> 45
6 <span class="k">*</span> 1 <span class="o">=</span> 6
6 <span class="k">*</span> 2 <span class="o">=</span> 12
6 <span class="k">*</span> 3 <span class="o">=</span> 18
6 <span class="k">*</span> 4 <span class="o">=</span> 24
6 <span class="k">*</span> 5 <span class="o">=</span> 30
6 <span class="k">*</span> 6 <span class="o">=</span> 36
6 <span class="k">*</span> 7 <span class="o">=</span> 42
6 <span class="k">*</span> 8 <span class="o">=</span> 48
6 <span class="k">*</span> 9 <span class="o">=</span> 54
7 <span class="k">*</span> 1 <span class="o">=</span> 7
7 <span class="k">*</span> 2 <span class="o">=</span> 14
7 <span class="k">*</span> 3 <span class="o">=</span> 21
7 <span class="k">*</span> 4 <span class="o">=</span> 28
7 <span class="k">*</span> 5 <span class="o">=</span> 35
7 <span class="k">*</span> 6 <span class="o">=</span> 42
7 <span class="k">*</span> 7 <span class="o">=</span> 49
7 <span class="k">*</span> 8 <span class="o">=</span> 56
7 <span class="k">*</span> 9 <span class="o">=</span> 63
8 <span class="k">*</span> 1 <span class="o">=</span> 8
8 <span class="k">*</span> 2 <span class="o">=</span> 16
8 <span class="k">*</span> 3 <span class="o">=</span> 24
8 <span class="k">*</span> 4 <span class="o">=</span> 32
8 <span class="k">*</span> 5 <span class="o">=</span> 40
8 <span class="k">*</span> 6 <span class="o">=</span> 48
8 <span class="k">*</span> 7 <span class="o">=</span> 56
8 <span class="k">*</span> 8 <span class="o">=</span> 64
8 <span class="k">*</span> 9 <span class="o">=</span> 72
9 <span class="k">*</span> 1 <span class="o">=</span> 9
9 <span class="k">*</span> 2 <span class="o">=</span> 18
9 <span class="k">*</span> 3 <span class="o">=</span> 27
9 <span class="k">*</span> 4 <span class="o">=</span> 36
9 <span class="k">*</span> 5 <span class="o">=</span> 45
9 <span class="k">*</span> 6 <span class="o">=</span> 54
9 <span class="k">*</span> 7 <span class="o">=</span> 63
9 <span class="k">*</span> 8 <span class="o">=</span> 72
9 <span class="k">*</span> 9 <span class="o">=</span> 81
</pre></table></code></div></div><p>在其中加入break，跳出当前循环</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="k">for </span>i <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>1 9<span class="si">)</span>
<span class="k">do 
	for </span>j <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>1 9<span class="si">)</span>
	<span class="k">do
		if</span> <span class="o">[</span> <span class="nv">$j</span> <span class="nt">-gt</span> 3 <span class="o">]</span>
		<span class="k">then
			</span><span class="nb">break
		</span><span class="k">else
			</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$i</span><span class="s2"> * </span><span class="nv">$j</span><span class="s2"> = </span><span class="k">$((</span><span class="nv">$i</span><span class="o">*</span><span class="nv">$j</span><span class="k">))</span><span class="s2">"</span>
		<span class="k">fi
	done
done</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script10.sh
1 <span class="k">*</span> 1 <span class="o">=</span> 1
1 <span class="k">*</span> 2 <span class="o">=</span> 2
1 <span class="k">*</span> 3 <span class="o">=</span> 3
2 <span class="k">*</span> 1 <span class="o">=</span> 2
2 <span class="k">*</span> 2 <span class="o">=</span> 4
2 <span class="k">*</span> 3 <span class="o">=</span> 6
3 <span class="k">*</span> 1 <span class="o">=</span> 3
3 <span class="k">*</span> 2 <span class="o">=</span> 6
3 <span class="k">*</span> 3 <span class="o">=</span> 9
4 <span class="k">*</span> 1 <span class="o">=</span> 4
4 <span class="k">*</span> 2 <span class="o">=</span> 8
4 <span class="k">*</span> 3 <span class="o">=</span> 12
5 <span class="k">*</span> 1 <span class="o">=</span> 5
5 <span class="k">*</span> 2 <span class="o">=</span> 10
5 <span class="k">*</span> 3 <span class="o">=</span> 15
6 <span class="k">*</span> 1 <span class="o">=</span> 6
6 <span class="k">*</span> 2 <span class="o">=</span> 12
6 <span class="k">*</span> 3 <span class="o">=</span> 18
7 <span class="k">*</span> 1 <span class="o">=</span> 7
7 <span class="k">*</span> 2 <span class="o">=</span> 14
7 <span class="k">*</span> 3 <span class="o">=</span> 21
8 <span class="k">*</span> 1 <span class="o">=</span> 8
8 <span class="k">*</span> 2 <span class="o">=</span> 16
8 <span class="k">*</span> 3 <span class="o">=</span> 24
9 <span class="k">*</span> 1 <span class="o">=</span> 9
9 <span class="k">*</span> 2 <span class="o">=</span> 18
9 <span class="k">*</span> 3 <span class="o">=</span> 27
</pre></table></code></div></div><p>写入break 2 ，跳出两层循环</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
<span class="k">for </span>i <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>1 9<span class="si">)</span>
<span class="k">do 
	for </span>j <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>1 9<span class="si">)</span>
	<span class="k">do
		if</span> <span class="o">[</span> <span class="nv">$j</span> <span class="nt">-gt</span> 3 <span class="o">]</span>
		<span class="k">then
			</span><span class="nb">break </span>2
		<span class="k">else
			</span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$i</span><span class="s2"> * </span><span class="nv">$j</span><span class="s2"> = </span><span class="k">$((</span><span class="nv">$i</span><span class="o">*</span><span class="nv">$j</span><span class="k">))</span><span class="s2">"</span>
		<span class="k">fi
	done
done</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script10.sh
1 <span class="k">*</span> 1 <span class="o">=</span> 1
1 <span class="k">*</span> 2 <span class="o">=</span> 2
1 <span class="k">*</span> 3 <span class="o">=</span> 3
</pre></table></code></div></div><h4 id="4循环控制continue">4.循环控制continue<a href="#4循环控制continue" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li>continue可以跳过执行当前循环的命令，但不会终止整个循环<li>可指定跳过的循环层数 continue n</ol><p>continue的本质就是跳出本次循环，继续执行下一个循环</p><h3 id="6shell处理用户输入">6.shell处理用户输入<a href="#6shell处理用户输入" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="1命令行输入">1.命令行输入<a href="#1命令行输入" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li>命令行参数输入是向shell脚本传递数据的最基本方法<li>位置参数：<code class="language-plaintext highlighter-rouge">$0</code> 是脚本名； <code class="language-plaintext highlighter-rouge">$1</code>到<code class="language-plaintext highlighter-rouge">$9</code>表示第一到第九个参数，第十个参数可以用<code class="language-plaintext highlighter-rouge">${10}</code>表示<li>若参数中存在空格，需要用双引号引用</ol><p>script11.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nb">echo</span> <span class="s2">"hello </span><span class="nv">$1</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"hello </span><span class="nv">$2</span><span class="s2">"</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script11.sh
hello
hello


root@luckydog:~# ./script11.sh alice ted
hello alice
hello ted


root@luckydog:~# ./script11.sh alice <span class="s2">"Li Ming"</span>
hello alice
hello Li Ming
</pre></table></code></div></div><h4 id="2特殊参数变量-">2.特殊参数变量 $#<a href="#2特殊参数变量-" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p><code class="language-plaintext highlighter-rouge">$#</code>存储了脚本运行时携带的命令行参数的个数</p><p>使用变量可以判断传入参数的个数</p><h4 id="3shift命令">3.shift命令<a href="#3shift命令" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>shift命令可以将每个参数的变量向左移动一个位置，</p><p>如使用一次shift，<code class="language-plaintext highlighter-rouge">$1</code>的值被删除，此时<code class="language-plaintext highlighter-rouge">$1</code>的值为<code class="language-plaintext highlighter-rouge">$2</code>以前的值、<code class="language-plaintext highlighter-rouge">$2</code>的值为<code class="language-plaintext highlighter-rouge">$3</code>以前的值；<code class="language-plaintext highlighter-rouge">$0</code>始终不变，为脚本名</p><li><p>一次移动多个位置，使用<code class="language-plaintext highlighter-rouge">shift N</code></p></ol><h4 id="4交互式处理-read命令">4.交互式处理-read命令<a href="#4交互式处理-read命令" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>script12.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="c"># -p表示输入参数</span>
<span class="nb">read</span> <span class="nt">-p</span> <span class="s2">"enter your name: "</span> first last

<span class="nb">echo</span> <span class="s2">"your first name is </span><span class="nv">$first</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="s2">"your last name is </span><span class="nv">$last</span><span class="s2">"</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script12.sh
enter your name: Li Ming
your first name is Li
your last name is Ming
</pre></table></code></div></div><p>script13.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="c"># -n1 表示输入一个字符，存入到后面的ans中</span>
<span class="nb">read</span> <span class="nt">-n1</span> <span class="nt">-p</span> <span class="s2">"Do you want to continue [Y/n]"</span> ans
<span class="nb">echo 
</span><span class="k">case</span> <span class="nv">$ans</span> <span class="k">in 
	</span>Y <span class="p">|</span> y<span class="p">)</span>
		<span class="nb">echo</span> <span class="s2">"YES"</span><span class="p">;;</span>
	N <span class="p">|</span> n<span class="p">)</span>
		<span class="nb">echo</span> <span class="s2">"Bye"</span><span class="p">;;</span>
<span class="k">esac</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script13.sh
Do you want to <span class="k">continue</span> <span class="o">[</span>Y/n]y
YES

root@luckydog:~# ./script13.sh
Do you want to <span class="k">continue</span> <span class="o">[</span>Y/n]n
Bye
</pre></table></code></div></div><p>script14.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="c"># -p表示输入参数,-t 5 表示5秒不输入则返回非0状态码，并退出</span>
<span class="k">if </span><span class="nb">read</span> <span class="nt">-t</span> 5 <span class="nt">-p</span> <span class="s2">"enter your num: "</span> num
<span class="k">then 
	</span><span class="nb">echo</span> <span class="s2">"your num is </span><span class="nv">$num</span><span class="s2">"</span>
<span class="k">else 
	</span><span class="nb">echo</span> <span class="s2">"Sorry timeout!"</span>
<span class="k">fi</span>
</pre></table></code></div></div><p>script15.sh</p><p>读取文件中的参数</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">filename</span><span class="o">=</span><span class="s1">'data.txt'</span>
<span class="k">if</span> <span class="o">[</span> <span class="nt">-f</span> <span class="k">${</span><span class="nv">filename</span><span class="k">}</span> <span class="o">]</span><span class="p">;</span><span class="k">then
	</span><span class="nv">count</span><span class="o">=</span>1
	<span class="nb">cat </span>data.txt |while <span class="nb">read </span>line
	<span class="k">do 
		</span><span class="nb">echo</span> <span class="s2">"line </span><span class="k">${</span><span class="nv">count</span><span class="k">}</span><span class="s2"> :</span><span class="k">${</span><span class="nv">line</span><span class="k">}</span><span class="s2">"</span>
		<span class="nv">count</span><span class="o">=</span><span class="nv">$[</span> <span class="nv">$count</span> + 1 <span class="o">]</span>
    <span class="k">done
    </span><span class="nb">echo</span> <span class="s2">"Finished reading the file"</span>
<span class="k">else
	</span><span class="nb">echo</span> <span class="s2">"</span><span class="k">${</span><span class="nv">filename</span><span class="k">}</span><span class="s2"> is not exist!"</span>
<span class="k">fi</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script15.sh
data.text is not exist!

root@luckydog:~# ./script15.sh
line 1 :this is the <span class="nb">test </span>file
line 2 :there are two lines!
Finished reading the file
</pre></table></code></div></div><h3 id="7脚本重定向">7.脚本重定向<a href="#7脚本重定向" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="1标准文件描述符">1.标准文件描述符<a href="#1标准文件描述符" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>Linux通过标准文件描述符来标识每个文件对象</p><div class="table-wrapper"><table><thead><tr><th>文件描述符<th>缩写<th>描述<tbody><tr><td>0<td>STDIN<td>标准输入<tr><td>1<td>STDOUT<td>标准输入<tr><td>2<td>STDERR<td>标准错误</table></div><h4 id="2重定向普通和错误信息">2.重定向普通和错误信息<a href="#2重定向普通和错误信息" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ul><li><p>只重定向错误输出</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">ls</span> <span class="nt">-al</span> badfile 2 <span class="o">&gt;</span> error.log
</pre></table></code></div></div><li><p>重定向错误和普通输出</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">ls</span> <span class="nt">-al</span> badfile testfile 2 <span class="o">&gt;</span> error.log 1 <span class="o">&gt;</span> output.log
</pre></table></code></div></div><li><p>重定向到同一个文件</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">ls</span> <span class="nt">-al</span> badfile testfile &amp;&gt; output.log
</pre></table></code></div></div></ul><ol><li><p>在脚本中重定向输出</p><p>临时重定向：</p><ul><li>重定向到文件描述符时，必须在文件描述符数字前加一个<code class="language-plaintext highlighter-rouge">&amp;</code><li><code class="language-plaintext highlighter-rouge">echo "this is a error message" &gt;&amp;2</code></ul><p>script16.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
   
<span class="nb">echo</span> <span class="s2">"this is a error message"</span> <span class="o">&gt;</span>&amp;2
<span class="nb">echo</span> <span class="s2">"this is a normal message"</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script16.sh
this is a error message
this is a normal message
   
   
root@luckydog:~# ./script16.sh 2&gt;error.log
this is a normal message
root@luckydog:~# <span class="nb">cat </span>error.log
this is a error message
</pre></table></code></div></div><p>永久重定向</p><ul><li>使用<code class="language-plaintext highlighter-rouge">exec</code>命令在脚本执行期间重定向某个特定的文件描述符<li>exec命令会启动一个shell来进行数据重定向</ul><p>script17.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
   
<span class="c"># 将普通输出定位到output.log文件中</span>
<span class="nb">exec </span>1&gt; output.log
<span class="nb">echo</span> <span class="s2">"this is a normal message"</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>root@luckydog:~# ./script17.sh
root@luckydog:~# <span class="nb">cat </span>output.log
this is a normal message
</pre></table></code></div></div><li><p>创建自己的重定向</p><p>除了上面的0、1、2三个描述符之外，其余4、5、6、7、8、9都可以作为自定义文件描述符</p><ul><li><p>创建文件描述符</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nb">exec </span>3&gt;output_file   <span class="c"># 输出文件描述符</span>
     
<span class="nb">exec </span>0&lt;input_file	<span class="c"># 输入文件描述符</span>
     
<span class="nb">exec </span>6 &lt;<span class="o">&gt;</span>test_file  <span class="c"># 读写文件描述符</span>
</pre></table></code></div></div><li><p>关闭文件描述符</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">exec </span>6&gt;&amp;-
<span class="nb">exec </span>6&lt;&amp;-
</pre></table></code></div></div><li><p>实现一个简单的线程池</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># 脚本需要并发的执行任务</span>
<span class="c"># 令牌桶模型控制并发数</span>
</pre></table></code></div></div></ul><p>script18.sh</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>
   
<span class="nv">n_thread</span><span class="o">=</span>3
<span class="nv">tmp_fifofile</span><span class="o">=</span><span class="s1">'file.fifo'</span>
<span class="nb">rm</span> <span class="nt">-f</span> <span class="k">${</span><span class="nv">tmp_fifofile</span><span class="k">}</span>
   
<span class="nb">mkfifo</span> <span class="k">${</span><span class="nv">tmp_fifofile</span><span class="k">}</span>
<span class="nb">exec </span>6&lt;<span class="o">&gt;</span> <span class="k">${</span><span class="nv">tmp_fifofile</span><span class="k">}</span>
   
<span class="k">for</span> <span class="o">((</span> <span class="nv">i</span><span class="o">=</span>1<span class="p">;</span> i &lt;<span class="o">=</span><span class="k">${</span><span class="nv">n_thread</span><span class="k">}</span><span class="p">;</span> i++<span class="o">))</span><span class="p">;</span><span class="k">do
	</span><span class="nb">echo</span> <span class="o">&gt;</span>&amp;6
<span class="k">done
   
for </span>i <span class="k">in</span> <span class="si">$(</span><span class="nb">seq </span>100 200<span class="si">)</span><span class="p">;</span><span class="k">do
	</span><span class="nb">read</span> <span class="nt">-u6</span>
	<span class="o">{</span>
		<span class="nb">echo</span> <span class="s2">"thread handling number : </span><span class="k">${</span><span class="nv">i</span><span class="k">}</span><span class="s2">"</span>
		<span class="nb">sleep </span>3
		<span class="nb">echo</span> <span class="o">&gt;</span>&amp;6
	<span class="o">}</span>&amp;
<span class="k">done
   
</span><span class="nb">wait
   
rm</span> <span class="k">${</span><span class="nv">tmp_fifofile</span><span class="k">}</span>
<span class="nb">exec </span>6&gt;&amp;-
<span class="nb">exec </span>6&lt;&amp;-
   
</pre></table></code></div></div></ol><h3 id="8shell脚本函数">8.shell脚本函数<a href="#8shell脚本函数" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="1基本的脚本函数">1.基本的脚本函数<a href="#1基本的脚本函数" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>创建函数</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># 第一种方法</span>
<span class="k">function </span>func_name<span class="o">{</span>...<span class="o">}</span>
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c"># 第二种方法</span>
func_name<span class="o">(){</span>...<span class="o">}</span>
</pre></table></code></div></div><li><p>使用函数</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>func_name
</pre></table></code></div></div></ol><h4 id="2在函数中使用变量">2.在函数中使用变量<a href="#2在函数中使用变量" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>​ 1.向函数传递参数</p><p>​ 位置参数变量</p><p>​ 2.在函数中处理变量</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>	* 全局变量	
	* 局部变量
</pre></table></code></div></div><h4 id="3函数的返回值">3.函数的返回值<a href="#3函数的返回值" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>默认的退出状态码</p><p>$?</p><li><p>使用return命令</p><p>只能获取 整数 0-255，否则使用下面第三种方法</p><li><p>使用命令执行获取函数的输出</p><p>ans = $(func)</p></ol><h3 id="9shell脚本实例">9.shell脚本实例<a href="#9shell脚本实例" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>目标： 获取指定目录中占用空间大小前十的子目录，并生成每日报告</p><p>核心命令：<code class="language-plaintext highlighter-rouge">du -s [directionary] sort -rn</code></p><p>核心功能：准备需要检测的目录，得到目录统计数据，将结果生成每日报告</p><p>完善脚本: 执行验证，设置计划任务</p><h4 id="1后台开启python服务并开机自运行">1.后台开启python服务，并开机自运行<a href="#1后台开启python服务并开机自运行" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><ol><li><p>准备shell文件和python文件</p><div class="table-wrapper"><table><tbody><tr><td>test—-<td>—- start.sh</table></div><div class="table-wrapper"><table><tbody><tr><td>​<td>—-back_run.py</table></div><p><em>start.sh</em></p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre> <span class="c">#!/bin/bash</span>
 <span class="nb">cd</span> /test
 python <span class="nt">-u</span> back_run.py <span class="o">&gt;</span> out.log 2&gt;&amp;1 &amp;
   
</pre></table></code></div></div><p><em>back_run.py</em></p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre> import os,datetime,time
 <span class="k">while </span>True:
    print<span class="o">(</span><span class="s1">'{}'</span>.format<span class="o">(</span>datetime.datetime.now<span class="o">()</span>.strftime<span class="o">(</span><span class="s1">'%Y-%m-%d %H:%M:%S'</span><span class="o">))</span>+<span class="s1">' running...'</span><span class="o">)</span>
	time.sleep<span class="o">(</span>1<span class="o">)</span>
</pre></table></code></div></div><li><p>编写服务文件</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>vim /etc/systemd/system/python_test.service
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre> 1 <span class="o">[</span>Unit]
  2 <span class="nv">Description</span><span class="o">=</span>python-test
  3 <span class="nv">After</span><span class="o">=</span>network.target
  4 <span class="nv">StartLimitIntervalSec</span><span class="o">=</span>0
  5 <span class="o">[</span>Service]
  6 <span class="nv">Type</span><span class="o">=</span>simple
  7 <span class="nv">Restart</span><span class="o">=</span>always
  8 <span class="nv">RestartSec</span><span class="o">=</span>1
  9 <span class="nv">User</span><span class="o">=</span>root
 10 <span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/bash /test/start.sh  // 必须为绝对路径
 11
 12 <span class="o">[</span>Install]
 13 <span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</pre></table></code></div></div><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c"># 修改权限</span>
<span class="nb">chmod </span>755  /etc/systemd/system/python_test.service
<span class="c"># 重载守护</span>
systemctl daemon-reload
<span class="c"># 开启开机启动服务</span>
systemctl <span class="nb">enable </span>python_test.service
</pre></table></code></div></div><li><p>重启服务：</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>reboot
</pre></table></code></div></div><li><p>附录–一些关于systemctl的命令</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="已复制！"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c"># 查看所有服务的状态</span>
systemctl status
   
<span class="c"># 查看单个任务</span>
systemctl status python_test.service
   
<span class="c"># 停止服务</span>
systemctl stop python_test
   
<span class="c"># 手工启动服务</span>
systemctl start python_test
   
<span class="c"># 禁用开机启动</span>
systemctl disable python_test.service
</pre></table></code></div></div></ol><p>参考链接</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/linux/'>Linux</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/linux%E5%9F%BA%E7%A1%80/" class="post-tag no-text-decoration" >Linux基础</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> 本文由作者按照 <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> 进行授权</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">分享</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Linux-Shell - Technical Blogs&url=https://carmanzheng.github.io//posts/Linux-Shell/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Linux-Shell - Technical Blogs&u=https://carmanzheng.github.io//posts/Linux-Shell/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Linux-Shell - Technical Blogs&url=https://carmanzheng.github.io//posts/Linux-Shell/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="分享链接" title-succeed="链接已复制！"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">最近更新</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Kubernetes%E6%A6%82%E8%BF%B0/">Kubernetes</a><li><a href="/posts/%E6%95%B0%E6%8D%AE%E5%BA%93-MySQL%E7%B4%A2%E5%BC%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">MySQL存储引擎</a><li><a href="/posts/Linux%E5%9F%BA%E7%A1%80/">Linux基础</a><li><a href="/posts/Python-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%A4%9A%E7%BA%BF%E7%A8%8B/">Python基操-多进程与多线程</a><li><a href="/posts/%E5%89%8D%E7%AB%AF-Vue%E8%B7%AF%E7%94%B1%E4%B8%8EVuex/">前端 Vue路由与vuex</a></ul></div><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/python%E5%9F%BA%E6%93%8D/">Python基操</a> <a class="post-tag" href="/tags/%E5%89%8D%E7%AB%AFjs/">前端JS</a> <a class="post-tag" href="/tags/%E5%89%8D%E7%AB%AFvue/">前端Vue</a> <a class="post-tag" href="/tags/%E5%89%8D%E7%AB%AFcss/">前端CSS</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/linux%E5%9F%BA%E7%A1%80/">Linux基础</a> <a class="post-tag" href="/tags/%E5%89%8D%E7%AB%AFhtml/">前端HTML</a> <a class="post-tag" href="/tags/github/">Github</a> <a class="post-tag" href="/tags/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91/">客户端开发</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">文章内容</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>相关文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Linux%E5%9F%BA%E7%A1%80/"><div class="card-body"> <em class="timeago small" date="2021-08-10 00:00:00 +0800" >2021-08-10</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Linux基础</h3><div class="text-muted small"><p> 第一部分 用户账号 用户账号的管理工作主要涉及到用户账号的添加、修改和删除。 添加用户账号就是在系统中创建一个新账号，然后为新账号分配用户号、用户组、主目录和登录Shell等资源。 1.添加账户 # 此命令创建了一个用户kuangshen，其中 -m 选项用来为登录名kuangshen产生一个主目录 /home/kuangshen # -m　使用者目录如不存在则自动建立 root@...</p></div></div></a></div><div class="card"> <a href="/posts/Linux-Ubuntu%E8%A3%85%E6%9C%BA/"><div class="card-body"> <em class="timeago small" date="2021-08-21 00:00:00 +0800" >2021-08-21</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Ubuntu装机</h3><div class="text-muted small"><p> 本文主要介绍ubuntu版本下的系统常用软件的装机，所有代码均写为sh命令，方便一键解决 1. 镜像源修改 alisource.list 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # ubuntu 20.04(focal) deb http://mirrors.aliyun.com/ubuntu/ focal main restricted univer...</p></div></div></a></div><div class="card"> <a href="/posts/Kubernetes%E6%A6%82%E8%BF%B0/"><div class="card-body"> <em class="timeago small" date="2022-02-17 00:00:00 +0800" >02-17</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Kubernetes</h3><div class="text-muted small"><p> ​ K8s是谷歌在2014年开源的容器化集群管理系统，使用k8s进行容器化应用部署。k8s利于应用的扩展，让容器化应用更加简洁高效。 1.自动装箱 ​ 基于容器对应用运行环境的资源配置要求，自动部署应用容器 2.自我修复 ​ 当容器失败时，会对容器进行重启 ​ 当所部署的Node节点有问题时，会对容器进行重新部署和重新调度 ​ 当容器未通过监控检查时，会关闭此容器；直到容器正常...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Linux%E5%9F%BA%E7%A1%80/" class="btn btn-outline-primary" prompt="上一篇"><p>Linux基础</p></a> <a href="/posts/Linux-Ubuntu%E8%A3%85%E6%9C%BA/" class="btn btn-outline-primary" prompt="下一篇"><p>Ubuntu装机</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/carmanzheng">carmanzheng</a>. <span data-toggle="tooltip" data-placement="top" title="除非另有说明，本网站上的博客文章均由作者按照知识共享署名 4.0 国际 (CC BY 4.0) 许可协议进行授权。">保留部分权利。</span></p></div><div class="footer-right"><p class="mb-0"> 本站由 <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> 生成，采用 <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> 主题。</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">热门标签</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/mysql/">MySQL</a> <a class="post-tag" href="/tags/python%E5%9F%BA%E6%93%8D/">Python基操</a> <a class="post-tag" href="/tags/%E5%89%8D%E7%AB%AFjs/">前端JS</a> <a class="post-tag" href="/tags/%E5%89%8D%E7%AB%AFvue/">前端Vue</a> <a class="post-tag" href="/tags/%E5%89%8D%E7%AB%AFcss/">前端CSS</a> <a class="post-tag" href="/tags/devops/">DevOps</a> <a class="post-tag" href="/tags/linux%E5%9F%BA%E7%A1%80/">Linux基础</a> <a class="post-tag" href="/tags/%E5%89%8D%E7%AB%AFhtml/">前端HTML</a> <a class="post-tag" href="/tags/github/">Github</a> <a class="post-tag" href="/tags/%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91/">客户端开发</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">搜索结果为空</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
