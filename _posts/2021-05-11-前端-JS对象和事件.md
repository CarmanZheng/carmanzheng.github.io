---
title: JS对象和事件
layout: post
tags: 前端JS
categories: '前端'
---

## 1.内置对象

### 12.1 对象

​		JS中所有的事物都是对象，字符串、数值、数组、函数... 每个对象都带有属性和方法。

### 12.2 自定义对象	

	1. 定义并创建对象实例
	2. 使用函数来定义对象，然后创建新的对象实例

```html
<body>
    <script>
    people = new Object():
    people.name = 'liming'
    people.age = '26'
        document.write("name:"+ people.name + "age"+son.age)
       //也可以采用下面的一种方式复制（字典）
	people = {name:"iwen",age:"30"}
    </script>    
</body>
```

通过函数

```html
<body>
    <script>
	function people(name,age){
        this.name = name;
        this.age = age; //注意，这儿需要this来索引
    }
        son = new people("liming",30)
        document.write("name:"+ people.name + "age"+son.age)
    </script>    
</body>
```

### 12.3 String字符串对象

|            成员            |                         作用                         |
| :------------------------: | :--------------------------------------------------: |
|           length           |                    获取字符串长度                    |
|      charAt(`index`)       |                 获取`index`处的字符                  |
|   indexOf(`searchValue`)   |     获取`searchValue`在字符串中的首次出现的位置      |
| lastIndexOf(`searchValue`) |     获取`searchValue`在字符串中的最后出现的位置      |
|  substring(`start`,`end`)  |        截取原字符串`start`到`end`之间的字符串        |
|  substr(`start`,`length`)  |   截取原字符串`start`开始往后`length`长度的字符串    |
|       toLowerCase()        |                      字符串小写                      |
|       toUpperCase()        |                      字符串大写                      |
| split(`sepetator`,`limit`) | 通过`seperator`来分割原字符串，`limit`为切割次数限制 |
|   replace(`str1`,`str2`)   |          用`str2`来替换`str1`,返回替换结果           |

```js
var str = 'helloworld';
str.length;	// 字符串长度，返回结果：10
str.charAt(5);//获取索引为5处的元素，返回结果：w
str.indexOf('o');//获取字母o第一次出现的位置，返回结果：4
str.lastIndexOf('o');// 获取字母o最后一次出现的位置，返回结果：6
str.substring(5);//获取索引5开始以后的所有元素，返回结果：world
str.substring(5,7);// 获取索引5开始到索引7之间的元素，返回结果：wo
str.substr(5);//获取索引5开始以后的所有元素，返回结果：world
str.substr(5,3);//获取索引5开始往后3个元素，返回结果：wor
str.toLowerCase();// 小写 helloworld
str.toUpperCase();//大写 HELLOWORLD
str.splite('l');// 使用字符串的l分割字符串，返回结果：["he","","owor","d"]
str.splite('l',3);// 切割三次，返回结果：["he","","owor"]
str.replace('World','JavaScript');// 返回结果：helloJavaScript
```

### 12.4 Date日期对象

1. Date对象 ：用于处理日期和时间

|        方法        | 作用                                                    |
| :----------------: | ------------------------------------------------------- |
|   getFullYear()    | 获取年份的四位数字，如2022                              |
|     getMonth()     | 获取月份，范围`0~11（0 --- 一月份，1 --- 二月份）`      |
|     getDate()      | 获取月份中的某一天，范围 `1~31`                         |
|     getHours()     | 获取小时数，范围`0~23`                                  |
|    getMinutes()    | 获取分钟数，范围`0~59`                                  |
|    getSeconds()    | 获取秒数，范围`0~59`                                    |
| getMilliSeconds()  | 获取毫秒数，范围`0~999`                                 |
|     getTime()      | 获取从`1970-01-01 00:00:00`距离Date对象中的时间的毫秒数 |
| setFullYear(value) | 设置年份                                                |
|     setMonth()     | 设置月份                                                |
|     setDate()      | 设置月份中的某一天                                      |
|     setHours()     | 设置小时数                                              |
|    setMinutes()    | 设置分钟数                                              |
|    setSeconds()    | 设置秒数                                                |
| setMilliSeconds()  | 设置毫秒数                                              |
|   setTime(value)   | 设置从`1970-01-01 00:00:00`后`value`毫秒数的时间        |

```js
>	var d = new Date(2021,4,25,3,12,23)
>	console.log(d)
	Tue May 25 2021 03:12:23 GMT+0800 (中国标准时间)

>	console.log(d.getDate())
	25
```

```html
<body onLoad="startTime()">

  <script>
    // var date = new Date();
    // document.write(date);
    // document.write(date.getFullYear());
    // document.write(date.getTime());
    // date.setFullYear(2020, 7, 20);

    function startTime() {
      var today = new Date();
      var h = today.getHours();
      var m = today.getMinutes();
      var s = today.getSeconds();
      m = checkTime(m);
      s = checkTime(s);
      document.getElementById("timetxt").innerHTML = h + ":" + m + ":" + s;
      t = setTimeout(function () {
        startTime()
      }, 1000); //通过时间设定输出，设定时间间隔为1000s
    }

    function checkTime(i) {
      if (i < 10) {
        i = "0" + i //控制格式为 08:27:30
      }
      return i
    }
  </script>
  <div id="timetxt"></div>
</body>
```

### 12.5 数组对象

​		数组对象在基本概念中讲过，此处再讲一次。

1. Array对象： 使用单独的变量名来存储一系列的值

2. 数组的创建： 

   第一种方式： 使用直接赋值创建

   ```html
   <script>
       var myArray = ["hello","world","love"]
   </script>
   ```

   第二种方式：使用关键字Array创建

   值得注意的是，此处对数组初始化后的长度，不影响数组继续添加元素，同时，添加元素后length也会发生相应的改变。

   ```javascript
   // 一维数组的创建
   var myarray = new Array(3);
   
   //二维数组的创建
   var myarray = [new Array(3), new Array(3) ]
   var myarray = [[],[]]
   ```

3. 数组的访问：通过指定数组名以及索引号码访问。JS与python一样，从0开始，myArray[0]代表第一个元素

   ```javascript
   // 遍历数组
   for (let i in myarray){
       console.log(i)
   }
   ```

   ```javascript
   // 元素的添加,其中没有赋值的位置为empty
   let height =[];
   height[1] = 10;
   
   // 元素的修改
   let arr =['a','b','c']
   arr[1] = 'abc'
   console.log(arr)  //此时的输出值为['a','abc','c']
   
   // 删除
   let arr =['a','b','c']
   delete arr[0]    // delete只是删除了元素值，元素位置仍然存在
   console.log(arr) //此时的输出值为[empty,'abc','c']
   ```

   ```javascript
   // 二维数组的访问 -- 采用遍历的方式； 后面的排序思想都是一样的，此处不敲代码了
   let arr = [[1,2,3],[4,5,6]];
   for (i in arr){
       for (j in arr[i]){
           console.log(arr[i][j]);
       }
   }
   ```

4. 数组内容检索

   ```javascript
   // includes() 方法
   var data = ['peach','pear',26,'216','grape']
   console.log(data.includes(26,3)) // 从数组下标为3 的位置检索数字26，此时返回值为false
   console.log(data.includes(26,-3)) // 从倒数第三个位置开始检索数字26，此时返回值为true
   // Array.isArray() 判断数据类型是否为数组类型
   console.log(Array.isArray(data)) // 此时的返回值为true
   ```

5. 数组转字符串

   ```javascript
   // join() 方法，将所有元素连接成一个字符串
   console.log(['a','b','c'].join()); // 此时输出结果为 a,b,c
   console,log([['a','b'],['c','d']].join('-')); // 此时输出结果为 a,b-c,d
   ```

   

6. 数组常用方法：

   concat() 合并数组

   ```html
   <script>
       var a=["hello","world"];
       var b=["love","sukhoi"]
       var c=a.concat(b)
   </script>
   ```

   sort()  排序

   ```html
   <script>
       var a =["a","c","d","g","w"]
       document.write(a.sort());
   
       ----------------------------------
       var a= ["5,"6","3","4","8"]
       document.write(a.sort(function(a,b){
       return b-a; // 降序排列，如果是a-b，即为升序排列
       }))
   </script>
   
   ```

   push() 末尾追加

   ```html
   <script>
   	var a =["a","c"]
       document.write(a.push("b")) //在a的末尾增加字母c
   </script>
   ```

   reverse() 翻转

   ```html
   <script>
   	var a =["a","c"，"b"]
       document.write(a.reverse()) //将数组内的元素翻转，翻转后为b,c,a
   </script>
   ```

   splice() 

   ```javascript
   var arr= ['a','b','c','d']
   console.log(arr.splice(2,2))  // 从下标为2的位置开始删除后面2个元素 ，此时返回的结果为['a','b']
   console.log(arr.splice(1,1,'element')) // 由于上面的返回值为['a','b']，此时的返回值为['a','element']
   ```

### 12.6 Math对象

| 成员               | 作用                                         |
| ------------------ | -------------------------------------------- |
| PI                 | 圆周率,3.1415926543                          |
| abs(x)             | 绝对值                                       |
| max([...])         | 数组最大值                                   |
| min([...])         | 数组最小值                                   |
| pow(base,exponent) | 基数base的exponent次幂，如pow(2,5)即2的5次幂 |
| sqrt(x)            | 获取x的平方根                                |
| ceil(x)            | x向上取整                                    |
| floor(x)           | x向下取整                                    |
| round(x)           | x四舍五入                                    |
| random()           | 获取0.0~1.0之间的随机值                      |

```js
document.write(Math.round(2.4)) //四舍五入返回2
document.write(Math.random()) //返回0-1之间的值
document.write(parseInt(Math.random()*10)) //返回0-10之间的整数值
document.write(Math.min(10,25,25,36,51,48)) //返回最小值10
document.write(Math.abs(-10)) //返回绝对值10

```

### 12.7 Number对象

| 成员              | 作用                                                   |
| ----------------- | ------------------------------------------------------ |
| MAX_VALUE         | JS所能表征的最大值                                     |
| MIN_VALUE         | JS所能表征的最小值                                     |
| toFixed(`digits`) | 使用定点表示法来格式化一个值，`digits`为保留的小数位数 |

```js
var num = 1234.5678
num.toFixed() // 四舍五入，返回结果：1234
num.toFixed(1) // 四舍五入，保留一位小数，返回结果：1234.5
num.toFixed(6) // 四舍五入，保留六位小数，返回结果：1234.567800
```

## 13.键盘事件

### 13.1 键盘事件

| 键盘事件   | 触发条件                                                     |
| ---------- | ------------------------------------------------------------ |
| onkeyup    | 某个键盘按键被松开时触发                                     |
| onkeydown  | 某个键盘按键被按下时触发                                     |
| onkeypress | 某个键盘按键被按住时触发【不能识别功能键 如shift， ctrl，箭头等】 |

三个事件的执行顺序为 `onkeydown` -> `onkeypress`->`onkeyup`

```html
   <script>
        // 常用的键盘事件
        //1. keyup 按键弹起的时候触发 
        document.addEventListener('keyup', function() {
            console.log('我弹起了');
        })

        //3. keypress 按键按下的时候触发  不能识别功能键 比如 ctrl shift 左右箭头啊
        document.addEventListener('keypress', function() {
                console.log('我按下了press');
        })
        //2. keydown 按键按下的时候触发  能识别功能键 比如 ctrl shift 左右箭头啊
        document.addEventListener('keydown', function() {
                console.log('我按下了down');
        })
        // 4. 三个事件的执行顺序  keydown -- keypress -- keyup
    </script>
```

### 13.2 键盘事件对象属性

| 属性    | 说明              |
| ------- | ----------------- |
| keyCode | 返回该键的ASCII值 |

```html
    <script>
        // 键盘事件对象中的keyCode属性可以得到相应键的ASCII码值
        document.addEventListener('keyup', function(e) {
            console.log('up:' + e.keyCode);
            // 我们可以利用keycode返回的ASCII码值来判断用户按下了那个键
            if (e.keyCode === 65) {
                alert('您按下的a键');
            } else {
                alert('您没有按下a键')
            }
        })
        document.addEventListener('keypress', function(e) {
            // console.log(e);
            console.log('press:' + e.keyCode);
        })
    </script>
```

```html
<!-- 目标： 当我们按下 s 键， 光标就定位到搜索框（文本框获得焦点）。-->


<input type="text">
<script>
    // 获取输入框
    var search = document.querySelector('input');
	// 给document注册keyup事件
    document.addEventListener('keyup', function(e) {
        // 判断keyCode的值
        if (e.keyCode === 83) {
            // 触发输入框的获得焦点事件
            search.focus();
        }
    })
</script>
```

模拟京东快递单号

```html
   <div class="search">
        <div class="con">123</div>
        <input type="text" placeholder="请输入您的快递单号" class="jd">
    </div>
    <script>
        // 获取要操作的元素
        var con = document.querySelector('.con');
        var jd_input = document.querySelector('.jd');
		// 给输入框注册keyup事件
        jd_input.addEventListener('keyup', function() {
				// 判断输入框内容是否为空
                if (this.value == '') {
                    // 为空，隐藏放大提示盒子
                    con.style.display = 'none';
                } else {
                    // 不为空，显示放大提示盒子，设置盒子的内容
                    con.style.display = 'block';
                    con.innerText = this.value;
                }
            })
        // 给输入框注册失去焦点事件，隐藏放大提示盒子
        jd_input.addEventListener('blur', function() {
                con.style.display = 'none';
            })
        // 给输入框注册获得焦点事件
        jd_input.addEventListener('focus', function() {
            // 判断输入框内容是否为空
            if (this.value !== '') {
                // 不为空则显示提示盒子
                con.style.display = 'block';
            }
        })
    </script>
```

