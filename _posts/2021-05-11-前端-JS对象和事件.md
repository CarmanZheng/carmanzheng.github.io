---
title: JS对象和事件
layout: post
tags: 前端JS
categories: '前端'
---

## 1.内置对象

### 12.1 对象

JS中所有的事物都是对象，字符串、数值、数组、函数... 

每个对象都带有属性和方法

### 12.2 自定义对象	

	1. 定义并创建对象实例
	2. 使用函数来定义对象，然后创建新的对象实例

```html
<body>
    <script>
    people = new Object():
    people.name = 'liming'
    people.age = '26'
        document.write("name:"+ people.name + "age"+son.age)
       //也可以采用下面的一种方式复制（字典）
	people = {name:"iwen",age:"30"}
    </script>    
</body>
```

通过函数

```html
<body>
    <script>
	function people(name,age){
        this.name = name;
        this.age = age; //注意，这儿需要this来索引
    }
        son = new people("liming",30)
        document.write("name:"+ people.name + "age"+son.age)
    </script>    
</body>
```



### 12.3 string字符串对象

1. string对象： string对象可以通过**双引号**和**单引号**进行表示
2. indexOf

```html
<body>
    <script>
	var str = 'hello world'
    document.write(str.indexOf("world")) //使用 indexOf 查询world单词是否存在于str中。
       								  //存在返回位置，不存在返回-1
    </script>    
</body>
```

3. 内容匹配 match()，replace()，toUpperCase()，toLowerCase ，split()

```html
<body>
    <script>    								
       	var str = 'hello world';
       document.write(str.match("world"));  //str中存在该字符串，打印出来，不存在返回空
       document.write(str.replace("world","jike"));   //将world替换为jike
       document.write(str.toUpperCase()) ;  //字符串转换为大/小写
       var str1 = "hello ,world, jk ";
       var s = str1.split(","); //通过字符串中的“ ，”进行分割字符串
       document.write(s[1]) ;  //和python一样，JS从0开始，此时输出第二个元素
    </script>    
</body>
```

### 12.4 Date日期对象

1. Date对象 ：用于处理日期和时间

2. 获得当日的日期 date =new Date()

3. 常用方法:

   getFullYear() 获取全年时间 2020 07 20 （GST)

   getTime()  返回毫秒级

   setFullYear()

4. 时钟

```html
<body onLoad="startTime()">

  <script>
    // var date = new Date();
    // document.write(date);
    // document.write(date.getFullYear());
    // document.write(date.getTime());
    // date.setFullYear(2020, 7, 20);

    function startTime() {
      var today = new Date();
      var h = today.getHours();
      var m = today.getMinutes();
      var s = today.getSeconds();
      m = checkTime(m);
      s = checkTime(s);
      document.getElementById("timetxt").innerHTML = h + ":" + m + ":" + s;
      t = setTimeout(function () {
        startTime()
      }, 1000); //通过时间设定输出，设定时间间隔为1000s
    }

    function checkTime(i) {
      if (i < 10) {
        i = "0" + i //控制格式为 08:27:30
      }
      return i
    }
  </script>
  <div id="timetxt"></div>
</body>
```

### 12.5 数组对象

1. Array对象： 使用单独的变量名来存储一系列的值

2. 数组的创建： 

   第一种方式： 使用直接赋值创建

   ```html
   <script>
       var myArray = ["hello","world","love"]
   </script>
   ```

   第二种方式：使用关键字Array创建

   值得注意的是，此处对数组初始化后的长度，不影响数组继续添加元素，同时，添加元素后length也会发生相应的改变。

   ```javascript
   // 一维数组的创建
   var myarray = new Array(3);
   
   //二维数组的创建
   var myarray = [new Array(3), new Array(3) ]
   var myarray = [[],[]]
   ```

3. 数组的访问：通过指定数组名以及索引号码访问。JS与python一样，从0开始，myArray[0]代表第一个元素

   ```javascript
   // 遍历数组
   for (let i in myarray){
       console.log(i)
   }
   ```

   ```javascript
   // 元素的添加,其中没有赋值的位置为empty
   let height =[];
   height[1] = 10;
   
   // 元素的修改
   let arr =['a','b','c']
   arr[1] = 'abc'
   console.log(arr)  //此时的输出值为['a','abc','c']
   
   // 删除
   let arr =['a','b','c']
   delete arr[0]    // delete只是删除了元素值，元素位置仍然存在
   console.log(arr) //此时的输出值为[empty,'abc','c']
   ```

   ```javascript
   // 二维数组的访问 -- 采用遍历的方式； 后面的排序思想都是一样的，此处不敲代码了
   let arr = [[1,2,3],[4,5,6]];
   for (i in arr){
       for (j in arr[i]){
           console.log(arr[i][j]);
       }
   }
   ```

4. 数组内容检索

   ```javascript
   // includes() 方法
   var data = ['peach','pear',26,'216','grape']
   console.log(data.includes(26,3)) // 从数组下标为3 的位置检索数字26，此时返回值为false
   console.log(data.includes(26,-3)) // 从倒数第三个位置开始检索数字26，此时返回值为true
   // Array.isArray() 判断数据类型是否为数组类型
   console.log(Array.isArray(data)) // 此时的返回值为true
   ```

5. 数组转字符串

   ```javascript
   // join() 方法，将所有元素连接成一个字符串
   console.log(['a','b','c'].join()); // 此时输出结果为 a,b,c
   console,log([['a','b'],['c','d']].join('-')); // 此时输出结果为 a,b-c,d
   ```

   

6. 数组常用方法：

   concat() 合并数组

   ```html
   <script>
       var a=["hello","world"];
       var b=["love","sukhoi"]
       var c=a.concat(b)
   </script>
   ```

   sort()  排序

   ```html
   <script>
       var a =["a","c","d","g","w"]
       document.write(a.sort());
   
       ----------------------------------
       var a= ["5,"6","3","4","8"]
       document.write(a.sort(function(a,b){
       return b-a; // 降序排列，如果是a-b，即为升序排列
       }))
   </script>
   
   ```

   push() 末尾追加

   ```html
   <script>
   	var a =["a","c"]
       document.write(a.push("b")) //在a的末尾增加字母c
   </script>
   ```

   reverse() 翻转

   ```html
   <script>
   	var a =["a","c"，"b"]
       document.write(a.reverse()) //将数组内的元素翻转，翻转后为b,c,a
   </script>
   ```

   splice() 

   ```javascript
   var arr= ['a','b','c','d']
   console.log(arr.splice(2,2))  // 从下标为2的位置开始删除后面2个元素 ，此时返回的结果为['a','b']
   console.log(arr.splice(1,1,'element')) // 由于上面的返回值为['a','b']，此时的返回值为['a','element']
   ```

### 12.6 Math对象

 1. Math对象

    执行常见的算术任务

    2. 常见方法：

    round():       四舍五入

    random():    返回0-1之间的随机数

    max() : 返回最大值

    min(): 返回最小值

    abs(): 返回绝对值

    ```html
    <script>
        document.write(Math.round(2.4)) //四舍五入返回2
        document.write(Math.random()) //返回0-1之间的值
        document.write(parseInt(Math.random()*10)) //返回0-10之间的整数值
        document.write(Math.min(10,25,25,36,51,48)) //返回最小值10
        document.write(Math.abs(-10)) //返回绝对值10
    </script>
    ```

## 13.键盘事件

### 13.1 键盘事件

| 键盘事件   | 触发条件                                                     |
| ---------- | ------------------------------------------------------------ |
| onkeyup    | 某个键盘按键被松开时触发                                     |
| onkeydown  | 某个键盘按键被按下时触发                                     |
| onkeypress | 某个键盘按键被按住时触发【不能识别功能键 如shift， ctrl，箭头等】 |

三个事件的执行顺序为 `onkeydown` -> `onkeypress`->`onkeyup`

```html
   <script>
        // 常用的键盘事件
        //1. keyup 按键弹起的时候触发 
        document.addEventListener('keyup', function() {
            console.log('我弹起了');
        })

        //3. keypress 按键按下的时候触发  不能识别功能键 比如 ctrl shift 左右箭头啊
        document.addEventListener('keypress', function() {
                console.log('我按下了press');
        })
        //2. keydown 按键按下的时候触发  能识别功能键 比如 ctrl shift 左右箭头啊
        document.addEventListener('keydown', function() {
                console.log('我按下了down');
        })
        // 4. 三个事件的执行顺序  keydown -- keypress -- keyup
    </script>
```

### 13.2 键盘事件对象属性

| 属性    | 说明              |
| ------- | ----------------- |
| keyCode | 返回该键的ASCII值 |

```html
    <script>
        // 键盘事件对象中的keyCode属性可以得到相应键的ASCII码值
        document.addEventListener('keyup', function(e) {
            console.log('up:' + e.keyCode);
            // 我们可以利用keycode返回的ASCII码值来判断用户按下了那个键
            if (e.keyCode === 65) {
                alert('您按下的a键');
            } else {
                alert('您没有按下a键')
            }
        })
        document.addEventListener('keypress', function(e) {
            // console.log(e);
            console.log('press:' + e.keyCode);
        })
    </script>
```

```html
<!-- 目标： 当我们按下 s 键， 光标就定位到搜索框（文本框获得焦点）。-->


<input type="text">
<script>
    // 获取输入框
    var search = document.querySelector('input');
	// 给document注册keyup事件
    document.addEventListener('keyup', function(e) {
        // 判断keyCode的值
        if (e.keyCode === 83) {
            // 触发输入框的获得焦点事件
            search.focus();
        }
    })
</script>
```

模拟京东快递单号

```html
   <div class="search">
        <div class="con">123</div>
        <input type="text" placeholder="请输入您的快递单号" class="jd">
    </div>
    <script>
        // 获取要操作的元素
        var con = document.querySelector('.con');
        var jd_input = document.querySelector('.jd');
		// 给输入框注册keyup事件
        jd_input.addEventListener('keyup', function() {
				// 判断输入框内容是否为空
                if (this.value == '') {
                    // 为空，隐藏放大提示盒子
                    con.style.display = 'none';
                } else {
                    // 不为空，显示放大提示盒子，设置盒子的内容
                    con.style.display = 'block';
                    con.innerText = this.value;
                }
            })
        // 给输入框注册失去焦点事件，隐藏放大提示盒子
        jd_input.addEventListener('blur', function() {
                con.style.display = 'none';
            })
        // 给输入框注册获得焦点事件
        jd_input.addEventListener('focus', function() {
            // 判断输入框内容是否为空
            if (this.value !== '') {
                // 不为空则显示提示盒子
                con.style.display = 'block';
            }
        })
    </script>
```

