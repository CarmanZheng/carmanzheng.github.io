---
title: Vue组件
layout: post
tags: 前端Vue
categories: '前端'
---

### 1. 组件定义

​	组件的定义：实现应用中**局部功能**代码和资源的集合

​	作用：复用编码、简化项目编码、提高后台运行效率

|                       传统方式编写应用                       |                       组件方式编写应用                       |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
| ![](../../assets/images/20210519VueComponent/image-20211127142934687.png) | ![](../../assets/images/20210519VueComponent/image-20211127143458375.png) |

### 2. 组件化编程

1. 单文件组件：一个文件中包含n个组件
2. 单文件组件：一个文件只包含1个组件

### 3. 使用步骤

1. 定义组件
2. 注册组件
3. 使用组件（写组件标签）

使用Vue.extend(options)创建，其中options和new Vue(options)中传入的options几乎一样，但有点区别，区别如下：

1. el不要写，为什么？ 

   最终所有的组件都要经过`vm`的管理，由`vm`的`el`决定服务哪个容器

2. data必须写成函数，为什么？

   避免组件被复用时，数据存在引用关系

3. 如何注册组件？
   1. 局部注册： `new Vue`的时候传入`components选项`
   2. 全局注册： `Vue.component('组件名'，组件)`

4. 编写组件

   ```html
   第一种写法：
   <school></school>
   
   第二种写法（脚手架必用）
   注意：这种写法叫做自闭标签，推荐在脚手架中使用； 不使用脚手架时，自闭标签会导致后续组件不能渲染
   <school/>    
   ```

   ```js
   // 定义组件
   const school = Vue.extend(options)
   可简写为：
   const school = options
   ```

```html
<body>
    <div id="root1">
        <!-- 第三步 编写组件标签 -->
        <school></school>
        <student></student>
    </div>
    <div id="root2">
        <hello></hello>
    </div>
</body>
<script src="./vue.js"></script>

<script type="text/javascript">
    Vue.config.productionTip = false
    
    // 第一步 创建组件
    const school = Vue.extend({
        template: `<div>学校：{{schoolName}} 地址：{{address}} <button type="button"
@click="showSchoolName">点击出现学校名</button></div>`,
        data() {
            return {
                schoolName: '尚硅谷',
                address: '北京昌平'
            }
        },
        methods: {
            showSchoolName() {
                alert(this.schoolName)
            }
        }
    });
    const student = Vue.extend({
        template: `<div>学生：{{studentName}} 年龄：{{age}}</div>`,
        data() {
            return {
                studentName: '张三',
                age: '19'
            }
        }
    });

    const hello = Vue.extend({
        template: `<div>{{msg}}</div>`,
        data() {
            return {
                msg: '你好啊'
            }
        }
    })
    
    
    // 第二步 全局注册
    Vue.component('hello', hello)

    //第二步 注册组件【局部】
    new Vue({
        el: '#root1',
        components: {
            school,
            student
        },
    })

    new Vue({
        el: '#root2',
    })
</script>
```

### 4. 关于VueCompnent

1. `school组件`本质是一个名为`VueComponent`的构造函数，且**不是程序员定义的**，而是Vue.extend生成的【源码可查】

2. 我们只需要写 `<school/>` 或者`<school></school>`,Vue解析时会帮我们创建`school组件的实例对象`，即vue帮我们执行的是

   ```js
   new VueComponent(options)
   ```

3. **特别注意：每次调用Vue.extend,返回的都是一个全新(New)的VueComponent！！！**

4. 关于this的指向

   1. 组件配置中：

      data函数、methods中的函数、watch中的函数、computed中的函数，它们的this均是 **【VueComponent实例对象】**

   2. new Vue()配置中：

      data函数、methods中的函数、watch中的函数、computed中的函数，它们的this均是 **【Vue实例对象】**

5. VueComponent的实例对象，以后简称为`vc`（组件实例对象）

   Vue实例对象，以后简称`vm`

### 5. 一个重要的内置关系

1. 一个重要的内置关系： `VueComponent.prototype.__proto__ === Vue.prototype`

2. 为什么要有这个关系?

   让组件实例对象（vc)可以访问到Vue原型上的属性、方法。

   函数 对应才有 `prototype`，实例对象有的是 `__prototype__`。


![](../../assets/images/20210519VueComponent/image-20211127195021412.png)

### 6. 单文件组件

Vue三大件

```html
<template></template>  写结构

<script></script>  写交互

<style></style>   写样式
```

## 